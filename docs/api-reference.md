# Справочник API инструментов

Полный справочник всех доступных инструментов MCP для Wildberries API.

## Товары

### wb_get_products

Получение списка товаров продавца с поддержкой фильтрации и пагинации.

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `limit` | number | Нет | Количество товаров (макс. 1000, по умолчанию 100) |
| `offset` | number | Нет | Смещение для пагинации (по умолчанию 0) |
| `search` | string | Нет | Поиск по названию товара |
| `brandID` | number | Нет | Фильтр по ID бренда |
| `updatedAtFrom` | string | Нет | Дата обновления от (ISO 8601) |
| `updatedAtTo` | string | Нет | Дата обновления до (ISO 8601) |

**Пример вызова:**

```json
{
  "limit": 50,
  "offset": 0,
  "search": "футболка",
  "updatedAtFrom": "2024-01-01T00:00:00Z",
  "updatedAtTo": "2024-01-31T23:59:59Z"
}
```

**Ответ:**

```json
{
  "data": [
    {
      "nmID": 123456789,
      "vendorCode": "ART-001",
      "title": "Футболка хлопковая",
      "brand": "MyBrand",
      "price": 1500,
      "quantity": 100
    }
  ],
  "metadata": {
    "count": 1,
    "pagination": {
      "total": 250,
      "limit": 50,
      "offset": 0,
      "hasMore": true
    }
  }
}
```

---

### wb_update_product_content

Обновление контента товара: название, описание и характеристики.

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `nmID` | number | Да | Артикул WB (nmID) товара |
| `title` | string | Нет | Новое название товара |
| `description` | string | Нет | Новое описание товара |
| `characteristics` | array | Нет | Массив характеристик |

**Структура характеристики:**

| Поле | Тип | Описание |
|------|-----|----------|
| `id` | number | ID характеристики |
| `name` | string | Название характеристики |
| `value` | string\|number | Значение характеристики |

**Пример вызова:**

```json
{
  "nmID": 123456789,
  "title": "Футболка хлопковая премиум",
  "description": "Высококачественная хлопковая футболка",
  "characteristics": [
    {
      "id": 1,
      "name": "Материал",
      "value": "100% хлопок"
    },
    {
      "id": 2,
      "name": "Страна производства",
      "value": "Россия"
    }
  ]
}
```

---

### wb_update_product_price

Обновление цены товара и/или скидки.

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `nmID` | number | Да | Артикул WB (nmID) товара |
| `price` | number | Да | Новая цена товара (в рублях) |
| `discount` | number | Нет | Скидка в процентах (0-100) |

**Пример вызова:**

```json
{
  "nmID": 123456789,
  "price": 1299,
  "discount": 15
}
```

---

### wb_update_product_stock

Обновление количества товара на складе.

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `nmID` | number | Да | Артикул WB (nmID) товара |
| `warehouseID` | number | Да | ID склада |
| `quantity` | number | Да | Количество товара (≥ 0) |

**Пример вызова:**

```json
{
  "nmID": 123456789,
  "warehouseID": 12345,
  "quantity": 50
}
```

---

## Заказы FBS

### wb_get_orders_fbs

Получение списка заказов FBS (Fulfillment by Seller).

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `dateFrom` | string | Да | Дата начала периода (ISO 8601) |
| `dateTo` | string | Да | Дата окончания периода (ISO 8601) |
| `status` | string | Нет | Фильтр по статусу заказа |
| `take` | number | Нет | Количество заказов (макс. 1000, по умолчанию 100) |
| `skip` | number | Нет | Пропустить N заказов (по умолчанию 0) |

**Возможные статусы:**
- `new` - новый
- `confirm` - подтверждён
- `complete` - выполнен
- `cancel` - отменён
- `cancel_by_client` - отменён клиентом

**Пример вызова:**

```json
{
  "dateFrom": "2024-01-01T00:00:00Z",
  "dateTo": "2024-01-31T23:59:59Z",
  "status": "confirm",
  "take": 100
}
```

---

### wb_get_picking_tasks_fbs

Получение списка сборочных заданий FBS.

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `dateFrom` | string | Да | Дата начала периода (ISO 8601) |
| `dateTo` | string | Да | Дата окончания периода (ISO 8601) |
| `status` | string | Нет | Фильтр по статусу задания |

**Пример вызова:**

```json
{
  "dateFrom": "2024-01-09T00:00:00Z",
  "dateTo": "2024-01-09T23:59:59Z",
  "status": "new"
}
```

---

### wb_update_order_status_fbs

Обновление статуса заказа FBS.

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `orderUID` | string | Да | Уникальный идентификатор заказа |
| `status` | string | Да | Новый статус заказа |

**Пример вызова:**

```json
{
  "orderUID": "WB-ORDER-12345",
  "status": "complete"
}
```

---

## Аналитика

### wb_get_search_queries

Получение статистики поисковых запросов по товарам.

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `dateFrom` | string | Да | Дата начала периода (ISO 8601) |
| `dateTo` | string | Да | Дата окончания периода (ISO 8601) |
| `nmID` | number | Нет | Артикул WB товара для фильтрации |

**Пример вызова:**

```json
{
  "dateFrom": "2024-01-01T00:00:00Z",
  "dateTo": "2024-01-31T23:59:59Z",
  "nmID": 123456789
}
```

---

### wb_get_stock_history

Получение истории остатков товара по складам.

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `dateFrom` | string | Да | Дата начала периода (ISO 8601) |
| `dateTo` | string | Да | Дата окончания периода (ISO 8601) |
| `nmID` | number | Да | Артикул WB товара |

**Пример вызова:**

```json
{
  "dateFrom": "2024-01-01T00:00:00Z",
  "dateTo": "2024-01-31T23:59:59Z",
  "nmID": 123456789
}
```

---

### wb_get_sales_funnel

Получение воронки продаж товаров.

**Параметры:**

| Параметр | Тип | Обязательный | Описание |
|----------|-----|--------------|----------|
| `dateFrom` | string | Да | Дата начала периода (ISO 8601) |
| `dateTo` | string | Да | Дата окончания периода (ISO 8601) |
| `nmID` | number | Нет | Артикул WB товара для фильтрации |

**Пример вызова:**

```json
{
  "dateFrom": "2024-01-01T00:00:00Z",
  "dateTo": "2024-01-31T23:59:59Z"
}
```

**Ответ:**

```json
{
  "data": [
    {
      "nmID": 123456789,
      "date": "2024-01-15",
      "views": 1500,
      "addToCart": 230,
      "orders": 180,
      "buyouts": 160,
      "cancels": 20
    }
  ]
}
```

---

## Обработка ошибок

Все инструменты возвращают ошибки в следующем формате:

```json
{
  "error": "Описание ошибки",
  "context": "имя_инструмента",
  "stack": "Стек вызовов (если доступен)"
}
```

### Типы ошибок

- **401/403** - Ошибка авторизации (проверьте API токен)
- **404** - Ресурс не найден
- **400** - Неверные параметры запроса
- **429** - Превышен лимит запросов
- **500+** - Ошибка сервера Wildberries

## Формат дат

Все даты должны быть в формате ISO 8601:

```
YYYY-MM-DDTHH:mm:ssZ
```

Примеры:
- `2024-01-09T10:30:00Z`
- `2024-12-31T23:59:59Z`
